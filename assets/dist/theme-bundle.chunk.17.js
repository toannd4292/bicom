(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{581:function(t,e,n){"use strict";n.r(e),function(t){n.d(e,"default",(function(){return p}));var o,c,i,r,a,s,u=n(54);function d(t,e){return(d=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}o=window,c=document,i="script",o.fbq||(r=o.fbq=function(){r.callMethod?r.callMethod.apply(r,arguments):r.queue.push(arguments)},o._fbq||(o._fbq=r),r.push=r,r.loaded=!0,r.version="2.0",r.queue=[],(a=c.createElement(i)).async=!0,a.src="https://connect.facebook.net/en_US/fbevents.js",(s=c.getElementsByTagName(i)[0]).parentNode.insertBefore(a,s));var p=function(e){var n,o;function c(){return e.apply(this,arguments)||this}o=e,(n=c).prototype=Object.create(o.prototype),n.prototype.constructor=n,d(n,o);var i=c.prototype;return i.onReady=function(){window.fbq("init","691187864249921"),this.trackPageView(),this.trackViewContent(),this.trackAddToCart(),this.trackCompleteRegistration(),this.trackLead(),this.trackAddToWishlist(),this.trackSearch(),this.trackInitiateCheckout(),this.trackPurchase(),this.trackSalesLead()},i.trackPageView=function(){window.fbq("track","PageView")},i.trackViewContent=function(){this.isProductPage()?window.fbq("track","ViewContent",{content_ids:[this.context.product.id],content_type:"product_group",content_name:this.context.product.title,value:String(this.context.product.price.without_tax?this.context.product.price.without_tax.value:this.context.product.price.with_tax.value),currency:"USD"}):this.isWebPage()&&window.fbq("track","ViewContent",{content_name:this.context.pageTitle})},i.trackAddToCart=function(){t("body").on("submit","[data-cart-item-add]",(function(e){window.fbq("track","AddToCart",{content_ids:[t(e.target).find('[name="product_id"]').val()],content_type:"product_group"})}))},i.trackCompleteRegistration=function(){this.isRegisteredAccountPage()&&window.fbq("track","CompleteRegistration",{value:0,currency:"USD"})},i.trackLead=function(){this.isNewsletterSubscribePage()&&window.fbq("track","Lead",{})},i.trackSalesLead=function(){-1!==window.location.pathname.indexOf("/become-a-retailer")&&t("form").on("submit",(function(){window.fbq("trackCustom","Become A Retailer",{})}))},i.trackAddToWishlist=function(){if("wishlist"===this.context.pageType){var t=decodeURIComponent(window.location.search),e=/added_product_id=(\d+)/.exec(t);-1!==window.location.pathname.indexOf("/wishlist.php")&&null!==e&&window.fbq("track","AddToWishlist",{content_ids:[e[1]],content_type:"product_group"})}},i.trackSearch=function(){var e=this;if(this.isSearchPage()){var n=decodeURIComponent(window.location.search),o=/search_query=([^&]*)/.exec(n);if(null!==o){var c=[];t(".card").each((function(){c.push(t(e).attr("data-product-id"))})),c.length>0?window.fbq("track","Search",{content_ids:c,content_type:"product_group",search_string:o[1]}):window.fbq("track","Search",{search_string:o[1]})}}},i.trackInitiateCheckout=function(){this.isCheckoutPage()&&window.fbq("track","InitiateCheckout")},i.trackPurchase=function(){var e=this;if(this.isCheckoutCompletePage()){var n=t('.orderConfirmation-section p[data-test="order-confirmation-order-number-text"] strong').text();if(!n)return setTimeout((function(){e.trackPurchase()}),100);t.ajax({type:"GET",async:!0,url:"/api/storefront/orders/"+n+"?include=payments%2ClineItems.physicalItems.socialMedia%2ClineItems.physicalItems.options%2ClineItems.digitalItems.socialMedia%2ClineItems.digitalItems.options"}).done((function(e){if(e){var n=[];e.lineItems&&e.lineItems.physicalItems&&t.each(e.lineItems.physicalItems,(function(t,e){n.push(e.productId)}));var o=e.baseAmount,c=e.currency&&e.currency.code?e.currency.code:"";o&&n.length&&c&&(window.fbq("track","AddPaymentInfo",{content_ids:n,content_type:"product_group"}),window.fbq("track","Purchase",{content_ids:n,content_type:"product_group",value:o,currency:c}))}})).fail((function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];console.log("onOrderDetailsLoadFail",e)}))}},i.isHomePage=function(){return"default"===this.context.pageType},i.isCartPage=function(){return"cart"===this.context.pageType},i.isSearchPage=function(){return"search"===this.context.pageType},i.isCheckoutPage=function(){return"checkout"===this.context.pageType},i.isCheckoutCompletePage=function(){return"orderconfirmation"===this.context.pageType},i.isProductPage=function(){return"product"===this.context.pageType},i.isWebPage=function(){return"page"===this.context.pageType},i.isRegisteredAccountPage=function(){return"createaccount_thanks"===this.context.pageType},i.isNewsletterSubscribePage=function(){return"newsletter_subscribe"===this.context.pageType},i.isMyAccountPage=function(){return-1!==["createaccount","account_orderstatus","account_inbox","account_addressbook","shippingaddressform","account_paymentmethods","wishlists","account_recentitems","editaccount","account_saved_return","add-wishlist","getnewpassword","account_downloaditem","account_order","account_returns","wishlist","account_orders"].indexOf(this.context.pageType)},c}(u.a)}.call(this,n(2))}}]);
//# sourceMappingURL=theme-bundle.chunk.17.js.map
